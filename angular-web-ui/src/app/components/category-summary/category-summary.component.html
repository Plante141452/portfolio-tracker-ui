<mat-accordion *ngIf="category">
    <div *ngIf="category.categories">
        <mat-expansion-panel *ngFor='let nestedCategory of category.categories'>
            <mat-expansion-panel-header *ngIf="categoryMetrics[nestedCategory.name]">
                {{nestedCategory.name}}
                {{categoryMetrics[nestedCategory.name].percentOfCategory.toFixed(2)}}%
                {{categoryMetrics[nestedCategory.name].percentChange.toFixed(2)}}%
            </mat-expansion-panel-header>

            <app-category-summary [category]="nestedCategory" [quotes]="quotes" [stockHistory]="stockHistory">
            </app-category-summary>

        </mat-expansion-panel>
    </div>

    <div *ngIf="category.stocks">
        <mat-expansion-panel *ngFor='let stock of category.stocks'>
            <mat-expansion-panel-header *ngIf="stockMetrics[stock.symbol]">
                {{stock.symbol}}
                {{stockMetrics[stock.symbol].percentOfCategory.toFixed(2)}}%
                {{stockMetrics[stock.symbol].percentChange.toFixed(2)}}%
            </mat-expansion-panel-header>

            This is where stock data would be!

        </mat-expansion-panel>
    </div>
</mat-accordion>